<!DOCTYPE html>
<html lang="mn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POS API 3.0 - Use Case Diagram</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
            max-width: 1200px;
            width: 100%;
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 28px;
        }
        
        .diagram-container {
            position: relative;
            width: 100%;
            height: 700px;
            border: 3px solid #3498db;
            border-radius: 15px;
            background: #e8f4f8;
            overflow: hidden;
        }
        
        .actor {
            position: absolute;
            text-align: center;
            font-size: 14px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .actor-figure {
            width: 50px;
            height: 80px;
            margin: 0 auto 10px;
        }
        
        .actor.left {
            left: 30px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .actor.right {
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .system-boundary {
            position: absolute;
            left: 150px;
            right: 150px;
            top: 50px;
            bottom: 50px;
            border: 3px solid #2c3e50;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.7);
        }
        
        .system-title {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: #e8f4f8;
            padding: 5px 20px;
            font-weight: bold;
            color: #2c3e50;
            border-radius: 20px;
            border: 2px solid #2c3e50;
        }
        
        .use-case {
            position: absolute;
            background: white;
            border: 2px solid #3498db;
            border-radius: 50px;
            padding: 15px 25px;
            font-size: 13px;
            text-align: center;
            color: #2c3e50;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            min-width: 140px;
        }
        
        .use-case:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
            background: #ecf0f1;
        }
        
        svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .connection {
            stroke: #34495e;
            stroke-width: 2;
            fill: none;
            opacity: 0.6;
        }
        
        .info-panel {
            margin-top: 30px;
            padding: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            display: none;
        }
        
        .info-panel.active {
            display: block;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .info-title {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .info-content {
            color: #34495e;
            line-height: 1.6;
        }
        
        .legend {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            color: #2c3e50;
        }
        
        .legend-icon {
            width: 30px;
            height: 20px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üè™ POS API 3.0 - Use Case –î–∏–∞–≥—Ä–∞–º–º</h1>
        
        <div class="diagram-container" id="diagram">
            <svg id="connections"></svg>
            
            <!-- Left Actor -->
            <div class="actor left" data-actor="user">
                <svg class="actor-figure" viewBox="0 0 50 80">
                    <circle cx="25" cy="15" r="12" fill="#3498db"/>
                    <rect x="17" y="30" width="16" height="25" fill="#3498db"/>
                    <line x1="10" y1="45" x2="25" y2="35" stroke="#3498db" stroke-width="3"/>
                    <line x1="40" y1="45" x2="25" y2="35" stroke="#3498db" stroke-width="3"/>
                    <line x1="17" y1="55" x2="10" y2="75" stroke="#3498db" stroke-width="3"/>
                    <line x1="33" y1="55" x2="40" y2="75" stroke="#3498db" stroke-width="3"/>
                </svg>
                <div>–•—ç—Ä—ç–≥–ª—ç–≥—á</div>
            </div>
            
            <!-- Right Actor -->
            <div class="actor right" data-actor="admin">
                <svg class="actor-figure" viewBox="0 0 50 80">
                    <circle cx="25" cy="15" r="12" fill="#e74c3c"/>
                    <rect x="17" y="30" width="16" height="25" fill="#e74c3c"/>
                    <line x1="10" y1="45" x2="25" y2="35" stroke="#e74c3c" stroke-width="3"/>
                    <line x1="40" y1="45" x2="25" y2="35" stroke="#e74c3c" stroke-width="3"/>
                    <line x1="17" y1="55" x2="10" y2="75" stroke="#e74c3c" stroke-width="3"/>
                    <line x1="33" y1="55" x2="40" y2="75" stroke="#e74c3c" stroke-width="3"/>
                </svg>
                <div>–ê–¥–º–∏–Ω</div>
            </div>
            
            <!-- System Boundary -->
            <div class="system-boundary">
                <div class="system-title">POS API 3.0 –°–∏—Å—Ç–µ–º</div>
            </div>
            
            <!-- Use Cases -->
            <div class="use-case" style="left: 320px; top: 80px;" data-case="addBill">
                –ë–∞—Ä–∏–º—Ç “Ø“Ø—Å–≥—ç—Ö<br>(addBill)
            </div>
            
            <div class="use-case" style="left: 520px; top: 80px;" data-case="updateBill">
                –ë–∞—Ä–∏–º—Ç —à–∏–Ω—ç—á–ª—ç—Ö<br>(updateBill)
            </div>
            
            <div class="use-case" style="left: 720px; top: 80px;" data-case="deleteBill">
                –ë–∞—Ä–∏–º—Ç –±—É—Ü–∞–∞—Ö<br>(deleteBill)
            </div>
            
            <div class="use-case" style="left: 320px; top: 200px;" data-case="receipt">
                –ë–∞—Ä–∏–º—Ç —Ö–∞—Ä–∞—Ö<br>(receipt)
            </div>
            
            <div class="use-case" style="left: 520px; top: 200px;" data-case="logs">
                –õ–æ–≥ —Ö–∞—Ä–∞—Ö<br>(logs)
            </div>
            
            <div class="use-case" style="left: 720px; top: 200px;" data-case="settings">
                –¢–æ—Ö–∏—Ä–≥–æ–æ<br>—É–¥–∏—Ä–¥–∞—Ö
            </div>
            
            <div class="use-case" style="left: 320px; top: 320px;" data-case="sendBills">
                –ë–∞—Ä–∏–º—Ç –∏–ª–≥—ç—ç—Ö<br>(sendBills)
            </div>
            
            <div class="use-case" style="left: 520px; top: 320px;" data-case="info">
                Ebarimt<br>–º—ç–¥—ç—ç–ª—ç–ª
            </div>
            
            <div class="use-case" style="left: 720px; top: 320px;" data-case="tax">
                –¢–∞—Ç–≤–∞—Ä<br>—Ç–æ–æ—Ü–æ–æ–ª–æ—Ö
            </div>
        </div>
        
        <div class="info-panel" id="infoPanel">
            <div class="info-title" id="infoTitle"></div>
            <div class="info-content" id="infoContent"></div>
        </div>
        
        <div class="legend">
            <div class="legend-item">
                <div class="legend-icon" style="background: #3498db;"></div>
                <span>–•—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω “Ø–π–ª–¥—ç–ª</span>
            </div>
            <div class="legend-item">
                <div class="legend-icon" style="background: #e74c3c;"></div>
                <span>–ê–¥–º–∏–Ω—ã “Ø–π–ª–¥—ç–ª</span>
            </div>
            <div class="legend-item">
                <div class="legend-icon" style="border: 2px solid #3498db; background: white;"></div>
                <span>Use Case</span>
            </div>
        </div>
    </div>

    <script>
        // Use case –º—ç–¥—ç—ç–ª—ç–ª
        const useCaseInfo = {
            addBill: {
                title: 'üìù –ë–∞—Ä–∏–º—Ç “Ø“Ø—Å–≥—ç—Ö (addBill)',
                content: '–®–∏–Ω—ç —Ü–∞—Ö–∏–º –±–∞—Ä–∏–º—Ç “Ø“Ø—Å–≥—ç—Ö. –î–∞–≤—Ö–∞—Ä–¥–∞–ª —à–∞–ª–≥–∞—Ö, —Ç–∞—Ç–≤–∞—Ä —Ç–æ–æ—Ü–æ–æ–ª–æ—Ö, ST-Ebarimt —Å–∏—Å—Ç–µ–º–¥ –∏–ª–≥—ç—ç—Ö “Ø–π–ª–¥–ª“Ø“Ø–¥–∏–π–≥ –≥“Ø–π—Ü—ç—Ç–≥—ç–Ω—ç. Endpoint: POST /posapi/addBill'
            },
            updateBill: {
                title: 'üîÑ –ë–∞—Ä–∏–º—Ç —à–∏–Ω—ç—á–ª—ç—Ö (updateBill)',
                content: '”®–º–Ω”© –Ω—å “Ø“Ø—Å—Å—ç–Ω –±–∞—Ä–∏–º—Ç—ã–Ω –º—ç–¥—ç—ç–ª–ª–∏–π–≥ —à–∏–Ω—ç—á–ª—ç—Ö. ebarimtId —ç—Å–≤—ç–ª orderId —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π. Endpoint: POST /posapi/updateBill'
            },
            deleteBill: {
                title: 'üóëÔ∏è –ë–∞—Ä–∏–º—Ç –±—É—Ü–∞–∞—Ö (deleteBill)',
                content: '–ë–∞—Ä–∏–º—Ç –±—É—Ü–∞–∞—Ö/—É—Å—Ç–≥–∞—Ö “Ø–π–ª–¥—ç–ª. ebarimtId —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π. –ë—É—Ü–∞–∞–ª—Ç—ã–Ω –ª–æ–≥ —Ö–∞–¥–≥–∞–ª–Ω–∞. Endpoint: POST /posapi/deleteBill'
            },
            receipt: {
                title: 'üëÅÔ∏è –ë–∞—Ä–∏–º—Ç —Ö–∞—Ä–∞—Ö (receipt)',
                content: '–ó–∞—Ö–∏–∞–ª–≥—ã–Ω ID-–∞–∞—Ä –±–∞—Ä–∏–º—Ç—ã–Ω –¥—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π –º—ç–¥—ç—ç–ª—ç–ª —Ö–∞—Ä–∞—Ö. QR –∫–æ–¥, –ª–æ—Ç–µ—Ä–∏–π–Ω –¥—É–≥–∞–∞—Ä –∑—ç—Ä—ç–≥. Endpoint: GET /posapi/receipt/:orderId'
            },
            logs: {
                title: 'üìä –õ–æ–≥ —Ö–∞—Ä–∞—Ö (logs)',
                content: '–ë–∞—Ä–∏–º—Ç—ã–Ω –ª–æ–≥, –±—É—Ü–∞–∞–ª—Ç—ã–Ω –ª–æ–≥, —à–∏–Ω—ç—á–ª—ç–ª—Ç–∏–π–Ω –ª–æ–≥, —Ö–∞—Ä–∏—É–ª—Ç—ã–Ω –ª–æ–≥ –∑—ç—Ä—ç–≥ –±“Ø—Ö –ª–æ–≥—É—É–¥—ã–≥ —Ö–∞—Ä–∞—Ö. Pagination –¥—ç–º–∂–∏–Ω—ç.'
            },
            settings: {
                title: '‚öôÔ∏è –¢–æ—Ö–∏—Ä–≥–æ–æ —É–¥–∏—Ä–¥–∞—Ö',
                content: 'POS —Ç–æ—Ö–∏—Ä–≥–æ–æ (merchantTin, posNo, districtCode –≥—ç—Ö –º—ç—Ç) “Ø“Ø—Å–≥—ç—Ö, —à–∏–Ω—ç—á–ª—ç—Ö, —É—Å—Ç–≥–∞—Ö “Ø–π–ª–¥–ª“Ø“Ø–¥. –ó”©–≤—Ö”©–Ω –∞–¥–º–∏–Ω–¥ –∑”©–≤—à”©”©—Ä”©–≥–¥—Å”©–Ω.'
            },
            sendBills: {
                title: 'üì§ –ë–∞—Ä–∏–º—Ç –∏–ª–≥—ç—ç—Ö (sendBills)',
                content: '–•“Ø–ª—ç—ç–≥–¥—ç–∂ –±—É–π –±–∞—Ä–∏–º—Ç—É—É–¥—ã–≥ ST-Ebarimt —Å–∏—Å—Ç–µ–º–¥ –∏–ª–≥—ç—ç—Ö batch “Ø–π–ª–¥—ç–ª. Endpoint: POST /posapi/sendBills'
            },
            info: {
                title: '‚ÑπÔ∏è Ebarimt –º—ç–¥—ç—ç–ª—ç–ª',
                content: '–¢–ï–ì-—ã–Ω Ebarimt —Å–∏—Å—Ç–µ–º—ç—ç—Å —Å–∞–ª–±–∞—Ä, TIN, –±“Ø—Ç—ç—ç–≥–¥—ç—Ö“Ø“Ø–Ω–∏–π —Ç–∞—Ç–≤–∞—Ä—ã–Ω –∫–æ–¥ –∑—ç—Ä—ç–≥ –º—ç–¥—ç—ç–ª—ç–ª —Ç–∞—Ç–∞—Ö proxy endpoints.'
            },
            tax: {
                title: 'üßÆ –¢–∞—Ç–≤–∞—Ä —Ç–æ–æ—Ü–æ–æ–ª–æ—Ö',
                content: '–ù”®–ê–¢ (10%) –±–æ–ª–æ–Ω –ù–•–ê–¢ (2%) —Ç–∞—Ç–≤–∞—Ä—ã–≥ –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä —Ç–æ–æ—Ü–æ–æ–ª–∂, –±–∞—Ä–∏–º—Ç–∞–Ω–¥ –Ω—ç–º—ç—Ö. –¢–∞—Ç–≤–∞—Ä—ã–Ω —Ç”©—Ä”©–ª (VAT_ABLE, VAT_FREE, VAT_ZERO) —è–ª–≥–∞–Ω —Ç–æ–æ—Ü–æ–æ–ª–Ω–æ.'
            }
        };
        
        // –•–æ–ª–±–æ–ª—Ç –∑—É—Ä–∞—Ö
        function drawConnections() {
            const svg = document.getElementById('connections');
            const diagram = document.getElementById('diagram');
            svg.innerHTML = '';
            
            const useCases = document.querySelectorAll('.use-case');
            const userActor = document.querySelector('[data-actor="user"]');
            const adminActor = document.querySelector('[data-actor="admin"]');
            
            // –•—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω —Ö–æ–ª–±–æ–ª—Ç—É—É–¥
            const userCases = ['addBill', 'updateBill', 'deleteBill', 'receipt', 'sendBills', 'info', 'tax'];
            userCases.forEach(caseId => {
                const useCase = document.querySelector(`[data-case="${caseId}"]`);
                if (useCase) {
                    drawLine(svg, userActor, useCase, '#3498db');
                }
            });
            
            // –ê–¥–º–∏–Ω—ã —Ö–æ–ª–±–æ–ª—Ç—É—É–¥
            const adminCases = ['logs', 'settings', 'info'];
            adminCases.forEach(caseId => {
                const useCase = document.querySelector(`[data-case="${caseId}"]`);
                if (useCase) {
                    drawLine(svg, adminActor, useCase, '#e74c3c');
                }
            });
        }
        
        function drawLine(svg, from, to, color) {
            const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            const fromRect = from.getBoundingClientRect();
            const toRect = to.getBoundingClientRect();
            const diagramRect = document.getElementById('diagram').getBoundingClientRect();
            
            line.setAttribute('x1', fromRect.left + fromRect.width/2 - diagramRect.left);
            line.setAttribute('y1', fromRect.top + fromRect.height/2 - diagramRect.top);
            line.setAttribute('x2', toRect.left + toRect.width/2 - diagramRect.left);
            line.setAttribute('y2', toRect.top + toRect.height/2 - diagramRect.top);
            line.setAttribute('class', 'connection');
            line.setAttribute('stroke', color);
            
            svg.appendChild(line);
        }
        
        // Use case –¥–∞—Ä–∞—Ö “Ø–µ–¥ –º—ç–¥—ç—ç–ª—ç–ª —Ö–∞—Ä—É—É–ª–∞—Ö
        document.querySelectorAll('.use-case').forEach(useCase => {
            useCase.addEventListener('click', function() {
                const caseId = this.getAttribute('data-case');
                const info = useCaseInfo[caseId];
                
                if (info) {
                    document.getElementById('infoTitle').textContent = info.title;
                    document.getElementById('infoContent').textContent = info.content;
                    document.getElementById('infoPanel').classList.add('active');
                }
            });
        });
        
        // –≠—Ö–ª“Ø“Ø–ª—ç—Ö
        window.addEventListener('load', drawConnections);
        window.addEventListener('resize', drawConnections);
    </script>
</body>
</html>